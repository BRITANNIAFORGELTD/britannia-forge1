Prompt for AI Code Designer: Definitive Overhaul of the Intelligent Quote Engine (v2)
Objective:

This is a formal directive to execute a complete, two-phase overhaul of the "Boiler Quote" application. The current prototype has significant logical flaws and UI/UX issues. Your task is to first architect and build a new, standalone Intelligent Quote Engine based on comprehensive real-world data. In the second phase, you will build the high-fidelity React components that consume this engine to create a market-leading user experience.

Phase 1: Architect and Build the "Intelligent Quote Engine" (✅ Completed)
Task: Create the "brain" of our quotation system. This will be a new, self-contained TypeScript module responsible for all complex calculations and recommendations.

File to Create: client/src/lib/intelligent-quote-engine.ts

Status: The AI Coder has confirmed this phase is complete. The engine should now contain all the core logic based on the provided data files.

Phase 2: Build the High-Fidelity React UI (Current Task)
Task: Create the user-facing components that will consume the "Intelligent Quote Engine" from Phase 1. This involves a complete rebuild of the UI to meet professional standards of clarity, usability, and accuracy.

Files to Create/Modify: client/src/components/QuoteWizard.tsx and related sub-components.

UI & UX Requirements:

1. Refactor Step 1 (Property Details):

Mobile-First Design: Ensure all elements are perfectly mobile-friendly.

Postcode Position: The "Postcode" field must be the first question at the top of the form.

NEW - Fused Switch Question: Add a mandatory question: "Is there a 3-amp fused switch next to the boiler's current location?" with "Yes" / "No" options.

Logic: If "No" is selected, the engine must add a £150 charge for "New Fused Spur Installation" to the final quote.

2. Overhaul Photo Uploads Step:

UI/UX:

For every photo, provide two clear buttons: "Take Photo" and "Upload File".

The user must be able to see a clear preview of each photo with an obvious "Delete/Replace" button.

Each uploader must have a simple icon or sample image to visually guide the user.

NEW - Additional Mandatory Photos: Add new mandatory uploaders for:

Main Electrical Meter / Fuse Box

Main Water Stopcock

NEW - Optional Photos: Increase the number of optional photo uploaders from two to four.

Conditional Photos: Ensure the logic correctly prompts for photos of the hot water cylinder and loft tanks if a "System" or "Regular" boiler is selected in Step 1.

3. Re-architect Final Steps (Quote, Booking & Payment):

Page Order: The "Customer Details" and "Payment & Booking" steps must be swapped. The user must see the full, detailed quote before providing personal information.

Quote Presentation Page (New Step 4):

Full Price Breakdown: Display a comprehensive, itemized breakdown of the final quote. This must include line items for:

Boiler Package Cost

Labour Cost (adjusted for postcode)

New: Decommissioning Cost (if converting from System/Regular boiler)

New: Flue Extension Cost (£80 per meter, if selected)

New: Condensate Pump Cost (if required)

New: Fused Spur Installation Cost (if required)

New: Thermostat Upgrade Cost (the difference from the included standard model)

A clear subtotal, VAT, and Final Total.

Parking Note: Add a clear, non-priced line item: "Parking Costs: To be arranged with the engineer."

Wording: Change "Power flush" to "System Flush & Cleanse".

Booking & Payment Page (New Step 5):

Date & Time Selection: The user must be able to select one required date and up to two optional dates. For each date, they should be able to select a time slot (e.g., "Morning (8am-12pm)" or "Afternoon (12pm-5pm)").

Validation & Error Messages: All error messages (e.g., "This field is required") must be highly visible (not transparent), well-positioned, and clearly state what is missing.

Final Output:

Provide the complete, updated code for the QuoteWizard.tsx component and any new sub-components, implementing all of the UI, UX, and logical enhancements specified in this prompt.